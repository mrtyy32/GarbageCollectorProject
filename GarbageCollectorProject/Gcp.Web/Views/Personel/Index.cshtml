@*@model List<Gcp.Web.Models.Personel>*@
@{
    ViewBag.Title = "Personel Index";
    Layout = "~/Views/Shared/_panelLayout.cshtml";
}
@section pagescript{
    <script src="../assets/global/scripts/datatable.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
    <script src="../assets/pages/scripts/table-datatables-responsive.js" type="text/javascript"></script>
    <script src="../assets/pages/scripts/ui-confirmations.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-confirmation/bootstrap-confirmation.js" type="text/javascript"></script>


}
@section pagestyle{

    <link href="../assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
}





<div class="row">

    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-green">
                    <i class="icon-briefcase font-green"></i>
                    <span class="caption-subject bold uppercase">Personel Listesi &nbsp;</span>
                    <a @*href="Giris"*@ data-toggle="modal" data-target="#yeniKayit">
                        <span class="btn btn-xs btn-info">Yeni Kayıt</span>

                    </a>
                </div>
                <div class="tools"> </div>
            </div>
            <div class="portlet-body">
                <div id="sample_2_wrapper" class="dataTables_wrapper no-footer">

                    <div>
                        <table class="table table-striped table-bordered table-hover dt-responsive dataTable no-footer dtr-column collapsed" width="100%" id="sample_2" role="grid" aria-describedby="sample_2_info" style="width: 100%;">
                            <thead>
                                <tr role="row">
                                    <th id="detail" class="control sorting_disabled" @*rowspan="1" colspan="1" style="width: 0px;" aria-label=""*@></th>
                                    <th class="all sorting_asc" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 37px;" aria-sort="ascending" aria-label="First name: activate to sort column descending"*@>Ad</th>
                                    <th class="min-phone-l sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 37px;" aria-label="Last name: activate to sort column ascending"*@>Soyad</th>
                                    <th class="min-tablet sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 72px;" aria-label="Position: activate to sort column ascending"*@>Pozisyon</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Office: activate to sort column ascending"*@>Giriş Tarihi</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Age: activate to sort column ascending"*@>Doğum Tarihi</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Start date: activate to sort column ascending"*@>Vardiya</th>
                                    <th class="desktop sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 44px;" aria-label="Salary: activate to sort column ascending"*@>Maaş</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Extn.: activate to sort column ascending"*@>Eğitim</th>
                                    <th>İşlemler</th>

                                </tr>
                            </thead>
                            <tbody id="tableBody"></tbody>

                            @*<tbody>
                                @foreach (var p in Model)
                                {
                                    <tr role="row" class="odd">
                                        <th class=" control"></th>
                                        <td class="sorting_1">@p.PersonelAd</td>
                                        <td>@p.PersonelSoyad</td>
                                        <td>@p.UnvanID</td>
                                        <td style="display: none;">@p.GirisTarihi</td>
                                        <td style="display: none;">@p.DogumTarihi</td>
                                        <td style="display: none;">@p.Vardiya</td>
                                        <td>@p.Maas</td>
                                        <td style="display: none;">@p.EgitimID</td>
                                        <td>

                                            <a href="/Personel/Edit/@p.PersonelID" class="btn btn-circle btn-icon-only btn-default">
                                                <i class="icon-pencil"></i>
                                            </a>
                                            <a href="/Personel/Delete/@p.PersonelID" data-toggle="confirmation" data-original-title="@p.PersonelAd @p.PersonelSoyad personelini silmek istediğinize emin misiniz?" class="btn btn-circle btn-icon-only btn-default">
                                                <i class="icon-trash"></i>
                                            </a>
                                            @*<a href="/Personel/Delete/@p.PersonelID" class="btn btn-xs btn-danger"><span class="glyphicon glyphicon-remove"></span></a>*@
                            @*</td>
                                        </tr>
                                    }
                                </tbody>*@
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- END EXAMPLE TABLE PORTLET-->
    </div>

</div>



<!--MODALs-->

<div class="modal fade" id="yeniKayit" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Yeni Kayıt</h4>
            </div>
            <div class="modal-body">



                <input type="text" id="pName" />
                <input type="text" id="pLastName" />
                <input type="number" id="unvanID" />
                <input type="number" id="pMaas" />
                <button type="submit" id="saveBtn">Kaydet</button>


            </div>
            <div class="modal-footer">
                <button data-bb-handler="ok" type="button" class="btn green">Ekle</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Vazgeç</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="guncelleKayit" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Yeni Kayıt</h4>
            </div>
            <div class="modal-body">

                @*<input type="text" value= />*@





            </div>
            <div class="modal-footer">
                <button data-bb-handler="ok" type="button" class="btn green">Ekle</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Vazgeç</button>
            </div>
        </div>
    </div>
</div>


<script>
    getListe();
    var _url = "http://localhost:53723/api/Personel";
    var personelIdGlobal = 0;

    function getListe() {

        $.ajax({
            url: "/Personel/GetProductsHtml",
            
            success: (data) => {
                console.log(data);
                $("#tableBody").html(data);
            }
        });
    };
    function deletePersonel(id) {
        $.ajax({
            url: "/Personel/Delete/" + id,
            type: "POST",
            success: () => {
                getListe();
            }
        });
    };

    $("#saveBtn").click(() => {
        $.ajax({
            url: "/Personel/Create",
            type: "POST",
            data: {
                
                PersonelAd: $("#pName").val(),
                PersonelSoyAd: $("#pLastName").val(),
                UnvanID: $("#unvanID").val(),
                Maas: $("#Maas").val()
            },
            success: () => {
                getListe();
            }
        });
    });
</script>

