@{
    ViewBag.Title = "Personel Index";
    Layout = "~/Views/Shared/_panelLayout.cshtml";
}
@section pagescript{
    <script src="../assets/global/scripts/datatable.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
    <script src="../assets/pages/scripts/table-datatables-responsive.js" type="text/javascript"></script>
    <script src="../assets/pages/scripts/ui-confirmations.js" type="text/javascript"></script>
    <script src="../assets/global/plugins/bootstrap-confirmation/bootstrap-confirmation.js" type="text/javascript"></script>


}
@section pagestyle{

    <link href="../assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
}





<div class="row">

    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-green">
                    <i class="icon-briefcase font-green"></i>
                    <span class="caption-subject bold uppercase">Personel Listesi &nbsp;</span>
                    <a @*href="Giris"*@ data-toggle="modal" data-target="#yeniKayit">
                        <span class="btn btn-xs btn-info">Yeni Kayıt</span>

                    </a>
                </div>
                <div class="tools"> </div>
            </div>
            <div class="portlet-body">
                <div id="sample_2_wrapper" class="dataTables_wrapper no-footer">

                    <div>
                        <table class="table table-striped table-bordered table-hover dt-responsive dataTable no-footer dtr-column collapsed" width="100%" id="sample_2" role="grid" aria-describedby="sample_2_info" style="width: 100%;">
                            <thead>
                                <tr role="row">
                                    <th id="detail" class="control sorting_disabled" @*rowspan="1" colspan="1" style="width: 0px;" aria-label=""*@></th>
                                    <th class="all sorting_asc" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 37px;" aria-sort="ascending" aria-label="First name: activate to sort column descending"*@>Ad</th>
                                    <th class="min-phone-l sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 37px;" aria-label="Last name: activate to sort column ascending"*@>Soyad</th>
                                    <th class="min-tablet sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 72px;" aria-label="Position: activate to sort column ascending"*@>Pozisyon</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Office: activate to sort column ascending"*@>Giriş Tarihi</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Age: activate to sort column ascending"*@>Doğum Tarihi</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Start date: activate to sort column ascending"*@>Vardiya</th>
                                    <th class="desktop sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 44px;" aria-label="Salary: activate to sort column ascending"*@>Maaş</th>
                                    <th class="none sorting" @*tabindex="0" aria-controls="sample_2" rowspan="1" colspan="1" style="width: 0px; display: none;" aria-label="Extn.: activate to sort column ascending"*@>Eğitim</th>
                                    <th>İşlemler</th>

                                </tr>
                            </thead>
                            <tbody id="tableBody"></tbody>

                            @*<tbody>
                                @foreach (var p in Model)
                                {
                                    <tr role="row" class="odd">
                                        <th class=" control"></th>
                                        <td class="sorting_1">@p.PersonelAd</td>
                                        <td>@p.PersonelSoyad</td>
                                        <td>@p.UnvanID</td>
                                        <td style="display: none;">@p.GirisTarihi</td>
                                        <td style="display: none;">@p.DogumTarihi</td>
                                        <td style="display: none;">@p.Vardiya</td>
                                        <td>@p.Maas</td>
                                        <td style="display: none;">@p.EgitimID</td>
                                        <td>

                                            <a href="/Personel/Edit/@p.PersonelID" class="btn btn-circle btn-icon-only btn-default">
                                                <i class="icon-pencil"></i>
                                            </a>
                                            <a href="/Personel/Delete/@p.PersonelID" data-toggle="confirmation" data-original-title="@p.PersonelAd @p.PersonelSoyad personelini silmek istediğinize emin misiniz?" class="btn btn-circle btn-icon-only btn-default">
                                                <i class="icon-trash"></i>
                                            </a>
                                            @*<a href="/Personel/Delete/@p.PersonelID" class="btn btn-xs btn-danger"><span class="glyphicon glyphicon-remove"></span></a>*@
                            @*</td>
                                        </tr>
                                    }
                                </tbody>*@
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- END EXAMPLE TABLE PORTLET-->
    </div>

</div>



<!--MODALs-->

<div class="modal fade" id="yeniKayit" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Yeni Kayıt</h4>
            </div>
            <div class="modal-body">

                <div class="portlet light bordered">
                    <div class="portlet-title">
                        <div class="caption font-red-sunglo">
                            <i class="icon-settings font-red-sunglo"></i>
                            <span class="caption-subject bold uppercase"> Default Form</span>
                        </div>

                    </div>
                    <div class="portlet-body form">
                        <form role="form">
                            <div class="form-body">
                                <div class="form-group">
                                    <label>Ad</label>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="fa fa-envelope"></i>
                                        </span>
                                        <input type="text" class="form-control" placeholder="Email Address">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Circle Input</label>
                                    <div class="input-group">
                                        <span class="input-group-addon input-circle-left">
                                            <i class="fa fa-envelope"></i>
                                        </span>
                                        <input type="text" class="form-control input-circle-right" placeholder="Email Address">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputPassword1">Password</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
                                        <span class="input-group-addon">
                                            <i class="fa fa-user font-red"></i>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Left Icon</label>
                                    <div class="input-icon">
                                        <i class="fa fa-bell-o font-green"></i>
                                        <input type="text" class="form-control" placeholder="Left icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Left Icon(.input-sm)</label>
                                    <div class="input-icon input-icon-sm">
                                        <i class="fa fa-bell-o"></i>
                                        <input type="text" class="form-control input-sm" placeholder="Left icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Left Icon(.input-lg)</label>
                                    <div class="input-icon input-icon-lg">
                                        <i class="fa fa-bell-o"></i>
                                        <input type="text" class="form-control input-lg" placeholder="Left icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Right Icon</label>
                                    <div class="input-icon right">
                                        <i class="fa fa-microphone fa-spin font-blue"></i>
                                        <input type="text" class="form-control" placeholder="Right icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Right Icon(.input-sm)</label>
                                    <div class="input-icon input-icon-sm right">
                                        <i class="fa fa-bell-o"></i>
                                        <input type="text" class="form-control input-sm" placeholder="Left icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Right Icon(.input-lg)</label>
                                    <div class="input-icon input-icon-lg right">
                                        <i class="fa fa-bell-o font-green"></i>
                                        <input type="text" class="form-control input-lg" placeholder="Left icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Circle Input</label>
                                    <div class="input-icon right">
                                        <i class="fa fa-microphone"></i>
                                        <input type="text" class="form-control input-circle" placeholder="Right icon">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Input with Icon</label>
                                    <div class="input-group input-icon right">
                                        <span class="input-group-addon">
                                            <i class="fa fa-envelope font-purple"></i>
                                        </span>
                                        <i class="fa fa-exclamation tooltips" data-original-title="Invalid email." data-container="body"></i>
                                        <input id="email" class="input-error form-control" type="text" value="">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Input With Spinner</label>
                                    <input class="form-control spinner" type="text" placeholder="Process something">
                                </div>
                                <div class="form-group">
                                    <label>Static Control</label>
                                    <p class="form-control-static"> email@example.com </p>
                                </div>
                                <div class="form-group">
                                    <label>Disabled</label>
                                    <input type="text" class="form-control" placeholder="Disabled" disabled="">
                                </div>
                                <div class="form-group">
                                    <label>Readonly</label>
                                    <input type="text" class="form-control" placeholder="Readonly" readonly="">
                                </div>
                                <div class="form-group">
                                    <label>Dropdown</label>
                                    <select class="form-control">
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                        <option>Option 3</option>
                                        <option>Option 4</option>
                                        <option>Option 5</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Multiple Select</label>
                                    <select multiple="" class="form-control">
                                        <option>Option 1</option>
                                        <option>Option 2</option>
                                        <option>Option 3</option>
                                        <option>Option 4</option>
                                        <option>Option 5</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Textarea</label>
                                    <textarea class="form-control" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile1">File input</label>
                                    <input type="file" id="exampleInputFile1">
                                    <p class="help-block"> some help text here. </p>
                                </div>
                                <div class="form-group">
                                    <label>Checkboxes</label>
                                    <div class="mt-checkbox-list">
                                        <label class="mt-checkbox">
                                            Checkbox 1
                                            <input type="checkbox" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-checkbox">
                                            Checkbox 2
                                            <input type="checkbox" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-checkbox">
                                            Checkbox 3
                                            <input type="checkbox" value="1" name="test">
                                            <span></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Outline Checkboxes</label>
                                    <div class="mt-checkbox-list">
                                        <label class="mt-checkbox mt-checkbox-outline">
                                            Checkbox 1
                                            <input type="checkbox" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-checkbox mt-checkbox-outline">
                                            Checkbox 2
                                            <input type="checkbox" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-checkbox mt-checkbox-outline">
                                            Checkbox 3
                                            <input type="checkbox" value="1" name="test">
                                            <span></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Inline Checkboxes</label>
                                    <div class="mt-checkbox-inline">
                                        <label class="mt-checkbox">
                                            <input type="checkbox" id="inlineCheckbox1" value="option1"> Checkbox 1
                                            <span></span>
                                        </label>
                                        <label class="mt-checkbox">
                                            <input type="checkbox" id="inlineCheckbox2" value="option2"> Checkbox 2
                                            <span></span>
                                        </label>
                                        <label class="mt-checkbox mt-checkbox-disabled">
                                            <input type="checkbox" id="inlineCheckbox3" value="option3" disabled=""> Disabled
                                            <span></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Radios</label>
                                    <div class="mt-radio-list">
                                        <label class="mt-radio">
                                            Radio 1
                                            <input type="radio" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-radio">
                                            Radio 2
                                            <input type="radio" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-radio">
                                            Radio 3
                                            <input type="radio" value="1" name="test">
                                            <span></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Outline Radios</label>
                                    <div class="mt-radio-list">
                                        <label class="mt-radio mt-radio-outline">
                                            Radio 1
                                            <input type="radio" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-radio mt-radio-outline">
                                            Radio 2
                                            <input type="radio" value="1" name="test">
                                            <span></span>
                                        </label>
                                        <label class="mt-radio mt-radio-outline">
                                            Radio 3
                                            <input type="radio" value="1" name="test">
                                            <span></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Inline Radio</label>
                                    <div class="mt-radio-inline">
                                        <label class="mt-radio">
                                            <input type="radio" name="optionsRadios" id="optionsRadios4" value="option1" checked=""> Option 1
                                            <span></span>
                                        </label>
                                        <label class="mt-radio">
                                            <input type="radio" name="optionsRadios" id="optionsRadios5" value="option2"> Option 2
                                            <span></span>
                                        </label>
                                        <label class="mt-radio mt-radio-disabled">
                                            <input type="radio" name="optionsRadios" id="optionsRadios6" value="option3" disabled=""> Disabled
                                            <span></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn blue">Submit</button>
                                <button type="button" class="btn default">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <input type="text" id="pName" />
                <input type="text" id="pLastName" />
                <input type="number" id="unvanID" />
                <input type="number" id="pMaas" />


            </div>
            <div class="modal-footer">
                <button data-bb-handler="ok" type="button" class="btn green" id="saveBtn">Kaydet</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Vazgeç</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="guncelleKayit" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Yeni Kayıt</h4>
            </div>
            <div class="modal-body">

                @*<input type="text" value= />*@





            </div>
            <div class="modal-footer">
                <button data-bb-handler="ok" type="button" class="btn green">Ekle</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Vazgeç</button>
            </div>
        </div>
    </div>
</div>


<script>
    getListe();
    var _url = "http://localhost:53723/api/Personel";
    var personelIdGlobal = 0;

    function getListe() {

        $.ajax({
            url: "/Personel/GetProductsHtml",
            
            success: (data) => {
                console.log(data);
                $("#tableBody").html(data);
            }
        });
    };
    function deletePersonel(id) {
        $.ajax({
            url: "/Personel/Delete/" + id,
            type: "POST",
            success: () => {
                getListe();
            }
        });
    };
    function getPersonel(id) {
        $.ajax({
            url: "/Personel/" + id,
            type: "GET",
            success: () => {
                getListe();
            }
        });
    };
    $("#saveBtn").click(() => {
        $.ajax({
            url: "/Personel/Create",
            type: "POST",
            data: {
                
                PersonelAd: $("#pName").val(),
                PersonelSoyAd: $("#pLastName").val(),
                UnvanID: $("#unvanID").val(),
                Maas: $("#Maas").val()
                GirisTarihi: $('#gTarihi').val()
            },
            success: () => {
                getListe();
            }
        });
    });
</script>

